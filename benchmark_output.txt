19.02.2022
Голая хрень, без всего, парсящая по одному
------------------------------------------------------------------
Benchmark                        Time             CPU   Iterations
------------------------------------------------------------------
BM_SomeFunction/1000          6224 us         6223 us          114
BM_SomeFunction/10000        60032 us        60023 us           12
BM_SomeFunction/100000      616047 us       615964 us            1
BM_SomeFunction/1000000    8177284 us      8176279 us            1
------------------------------------------------------------------
Benchmark                        Time             CPU   Iterations
------------------------------------------------------------------
BM_SomeFunction/1000          6256 us         6255 us          113
BM_SomeFunction/10000        60560 us        60548 us           11
BM_SomeFunction/100000      641979 us       641815 us            1
BM_SomeFunction/1000000    8630172 us      8628790 us            1



parse by byte to 32 bytes buffer
------------------------------------------------------------------
Benchmark                        Time             CPU   Iterations
------------------------------------------------------------------
BM_SomeFunction/1000          7788 us         7786 us           88
BM_SomeFunction/10000        76286 us        76265 us            9
BM_SomeFunction/100000      793528 us       793357 us            1
BM_SomeFunction/1000000   10288195 us     10285852 us            1
------------------------------------------------------------------
Benchmark                        Time             CPU   Iterations
------------------------------------------------------------------
BM_SomeFunction/1000          7944 us         7942 us           90
BM_SomeFunction/10000        77046 us        77027 us            9
BM_SomeFunction/100000      797993 us       797863 us            1
BM_SomeFunction/1000000   10248939 us     10247254 us            1

parse by byte to 1024 bytes buffer
------------------------------------------------------------------
Benchmark                        Time             CPU   Iterations
------------------------------------------------------------------
BM_SomeFunction/1000          7299 us         7297 us           97
BM_SomeFunction/10000        68667 us        68655 us           10
BM_SomeFunction/100000      707684 us       707581 us            1
BM_SomeFunction/1000000    9025911 us      9024369 us            1
------------------------------------------------------------------
Benchmark                        Time             CPU   Iterations
------------------------------------------------------------------
BM_SomeFunction/1000          7155 us         7152 us          100
BM_SomeFunction/10000        68886 us        68872 us           10
BM_SomeFunction/100000      711189 us       711072 us            1
BM_SomeFunction/1000000    9088148 us      9086943 us            1

------------------------------------------------------------------
Benchmark                        Time             CPU   Iterations
------------------------------------------------------------------
BM_SomeFunction/1000          7177 us         7175 us           96
BM_SomeFunction/10000        69929 us        69914 us           10
BM_SomeFunction/100000      738849 us       738654 us            1
BM_SomeFunction/1000000    9501079 us      9498091 us            1

parse by byte to 2048 bytes buffer
------------------------------------------------------------------
Benchmark                        Time             CPU   Iterations
------------------------------------------------------------------
BM_SomeFunction/1000          7168 us         7164 us           98
BM_SomeFunction/10000        69718 us        69647 us           10
BM_SomeFunction/100000      730208 us       729508 us            1
BM_SomeFunction/1000000    9616022 us      9602766 us            1

parse by byte to 8192 bytes buffer
------------------------------------------------------------------
Benchmark                        Time             CPU   Iterations
------------------------------------------------------------------
BM_SomeFunction/1000          7934 us         7933 us           88
BM_SomeFunction/10000        77803 us        77791 us            9
BM_SomeFunction/100000      807738 us       807640 us            1
BM_SomeFunction/1000000   10542148 us     10540543 us            1

10 bytes buffer with read()
------------------------------------------------------------------
Benchmark                        Time             CPU   Iterations
------------------------------------------------------------------
BM_SomeFunction/1000          6093 us         6092 us          113
BM_SomeFunction/10000        61946 us        61930 us           11
BM_SomeFunction/100000      601997 us       601935 us            1
BM_SomeFunction/1000000    7771835 us      7770968 us            1
------------------------------------------------------------------
Benchmark                        Time             CPU   Iterations
------------------------------------------------------------------
BM_SomeFunction/1000          6145 us         6144 us          110
BM_SomeFunction/10000        59151 us        59144 us           12
BM_SomeFunction/100000      614725 us       614306 us            1
BM_SomeFunction/1000000    7941947 us      7931739 us            1


512 bytes buffer with read()
------------------------------------------------------------------
Benchmark                        Time             CPU   Iterations
------------------------------------------------------------------
BM_SomeFunction/1000          3928 us         3927 us          178
BM_SomeFunction/10000        38101 us        38095 us           18
BM_SomeFunction/100000      395458 us       395410 us            2
BM_SomeFunction/1000000    4831810 us      4831252 us            1
------------------------------------------------------------------
Benchmark                        Time             CPU   Iterations
------------------------------------------------------------------
BM_SomeFunction/1000          3988 us         3987 us          174
BM_SomeFunction/10000        38389 us        38383 us           18
BM_SomeFunction/100000      401335 us       401279 us            2
BM_SomeFunction/1000000    4880444 us      4870402 us            1
------------------------------------------------------------------
Benchmark                        Time             CPU   Iterations
------------------------------------------------------------------
BM_SomeFunction/1000          3934 us         3934 us          178
BM_SomeFunction/10000        38083 us        38079 us           18
BM_SomeFunction/100000      395483 us       395440 us            2
BM_SomeFunction/1000000    4845961 us      4845449 us            1


1024 bytes buffer with read()
------------------------------------------------------------------
Benchmark                        Time             CPU   Iterations
------------------------------------------------------------------
BM_SomeFunction/1000          4088 us         4088 us          171
BM_SomeFunction/10000        41319 us        41310 us           17
BM_SomeFunction/100000      415707 us       415661 us            2
BM_SomeFunction/1000000    5215295 us      5214523 us            1
------------------------------------------------------------------
Benchmark                        Time             CPU   Iterations
------------------------------------------------------------------
BM_SomeFunction/1000          4092 us         4091 us          171
BM_SomeFunction/10000        40427 us        40422 us           17
BM_SomeFunction/100000      417076 us       417034 us            2
BM_SomeFunction/1000000    5168937 us      5168383 us            1


2048 with read
------------------------------------------------------------------
Benchmark                        Time             CPU   Iterations
------------------------------------------------------------------
BM_SomeFunction/1000          3826 us         3825 us          183
BM_SomeFunction/10000        37956 us        37950 us           19
BM_SomeFunction/100000      386825 us       386778 us            2
BM_SomeFunction/1000000    4737574 us      4736919 us            1
------------------------------------------------------------------
Benchmark                        Time             CPU   Iterations
------------------------------------------------------------------
BM_SomeFunction/1000          3849 us         3848 us          181
BM_SomeFunction/10000        38141 us        38135 us           19
BM_SomeFunction/100000      392158 us       392107 us            2
BM_SomeFunction/1000000    4786128 us      4785450 us            1

With 4096 and more benchmark goes degrade, or it shows same results



2048 with optimal skip
------------------------------------------------------------------
Benchmark                        Time             CPU   Iterations
------------------------------------------------------------------
BM_SomeFunction/1000          3801 us         3801 us          184
BM_SomeFunction/10000        36808 us        36803 us           19
BM_SomeFunction/100000      376413 us       376357 us            2
BM_SomeFunction/1000000    4847403 us      4846795 us            1


